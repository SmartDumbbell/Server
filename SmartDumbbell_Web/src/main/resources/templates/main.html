<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>프로젝트 이름</title>
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
<div class="header">
    <img src="/image/WebSystem_Main.png" alt="프로젝트 이미지" width="300" height="150">
</div>
<form class = "leftbox">
  <div class="sidebar">
    <ul>
      <li><a href="#" onclick="showTable('Users')">전체 유저 정도 정보</a></li>
      <li><a href="#" onclick="showTable('MyUsers')">내 유저 정보</a></li>
    </ul>
  </div>
</form>

<div id="table-container"></div>

<script>
  function showTable(category) {
    let apiUrl = "";

    if (category === "Users") {
      apiUrl = "http://localhost:8080/WebProcess/UserAll";
    } else if (category === "MyUsers") {
      apiUrl = "http://localhost:8080/WebProcess/myUsers";
    }

    // API를 호출하여 사용자 리스트 데이터를 받아옴
    fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
              // 표 생성
              const tableContainer = document.getElementById("table-container");
              tableContainer.innerHTML = ""; // 기존 표 초기화

              const table = document.createElement("table");
              table.classList.add("data-table");

              const thead = document.createElement("thead");
              const tr = document.createElement("tr");

              const headers = Object.keys(data[0]);
              for (const header of headers) {
                const th = document.createElement("th");
                th.textContent = header;
                tr.appendChild(th);
              }

              thead.appendChild(tr);
              table.appendChild(thead);

              const tbody = document.createElement("tbody");
              for (const item of data) {
                const row = document.createElement("tr");

                for (const header of headers) {
                  const cell = document.createElement("td");
                  cell.textContent = item[header];
                  row.appendChild(cell);
                }

                tbody.appendChild(row);
              }

              table.appendChild(tbody);
              tableContainer.appendChild(table);
            })
            .catch(error => {
              console.error("Error fetching data:", error);
            });
  }

</script>
</body>
</html>